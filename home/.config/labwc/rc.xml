<?xml version="1.0" encoding="UTF-8"?>
<openbox_config xmlns="http://openbox.org/3.4/rc">

  <!-- ===== MENU HOOK ===== -->
  <menu>
    <file>~/.config/labwc/menu.xml</file>
    <!-- optional: delay before hiding submenus (ms)
    <hideDelay>200</hideDelay>
    -->
  </menu>

  <!-- ===== THEME & DECOR ===== -->
  <theme>
    <name>PiXonyx</name>
    <!-- Rounded corners + shadows (theme must support these) -->
    <cornerRadius>10</cornerRadius>
    <keepBorder>yes</keepBorder>
    <dropShadows>yes</dropShadows>
    <dropShadowsOnTiled>yes</dropShadowsOnTiled>

    <!-- Fonts -->
    <font place="ActiveWindow">
      <name>Inter</name>
      <size>10</size>
      <weight>Medium</weight>
      <slant>Normal</slant>
    </font>
    <font place="InactiveWindow">
      <name>Inter</name>
      <size>10</size>
      <weight>Light</weight>
      <slant>Normal</slant>
    </font>
    <font place="MenuHeader">
      <name>Inter</name>
      <size>10</size>
      <weight>Medium</weight>
      <slant>Normal</slant>
    </font>
    <font place="MenuItem">
      <name>Inter</name>
      <size>10</size>
      <weight>Regular</weight>
      <slant>Normal</slant>
    </font>

    <titlebar>
      <showTitle>yes</showTitle>
      <maximizeMode>titlebar</maximizeMode>
    </titlebar>
  </theme>

  <!-- ===== FOCUS & PLACEMENT ===== -->
  <focus>
    <followMouse>no</followMouse>
    <raiseOnFocus>no</raiseOnFocus>
    <focusLast>yes</focusLast>
  </focus>

  <placement>
    <policy>Smart</policy>
    <center>yes</center>
    <monitor>Primary</monitor>
  </placement>

  <!-- Subtle gaps -->
  <margins>
    <top>8</top>
    <bottom>8</bottom>
    <left>8</left>
    <right>8</right>
  </margins>

  <!-- ===== EDGE SNAP UX ===== -->
  <snapping>
    <range>12</range>
    <cornerRange>48</cornerRange>
    <topMaximize>yes</topMaximize>
    <notifyClient>edge</notifyClient>
    <overlay>
      <enabled>yes</enabled>
    </overlay>
  </snapping>

  <!-- ===== MOUSE ===== -->
  <mouse>
    <!-- Super (W) + Left drag = move; Super + Right drag = resize -->
    <context name="Frame">
      <mousebind button="W-Left" action="Press">
        <action name="Focus"/>
      </mousebind>
      <mousebind button="W-Left" action="Drag">
        <action name="Move"/>
      </mousebind>
      <mousebind button="W-Right" action="Press">
        <action name="Focus"/>
      </mousebind>
      <mousebind button="W-Right" action="Drag">
        <action name="Resize"/>
      </mousebind>
    </context>

    <!-- Right-click desktop = root menu -->
    <context name="Root">
      <mousebind button="Right" action="Press">
        <action name="ShowMenu">
          <menu>root-menu</menu>
        </action>
      </mousebind>
    </context>
  </mouse>

  <!-- ===== KEYBOARD (no keypad needed) ===== -->
  <keyboard>
    <default/>

    <keybind key="Super_L"/>
    <keybind key="Super_R"/>

    <!-- Quick test launcher -->
    <keybind key="W-t">
      <action name="Execute">
        <command>kitty</command>
      </action>
    </keybind>

    <!-- Launchers -->
    <keybind key="W-Return">
      <action name="Execute">
        <command>kitty</command>
      </action>
    </keybind>

    <!-- Window lifecycle -->
    <keybind key="W-Q">
      <action name="Close"/>
    </keybind>
    <keybind key="W-F">
      <action name="ToggleFullscreen"/>
    </keybind>
    <keybind key="W-M">
      <action name="Maximize"/>
    </keybind>
    <keybind key="W-Shift-M">
      <action name="UnMaximize"/>
    </keybind>

    <!-- Half left -->
    <keybind key="W-S-7">
      <action name="MoveResizeTo">
        <x>0</x><y>0</y><width>50%</width><height>100%</height>
      </action>
    </keybind>

    <!-- Two-thirds left -->
    <keybind key="W-S-8">
      <action name="MoveResizeTo">
        <x>0</x><y>0</y><width>66%</width><height>100%</height>
      </action>
    </keybind>

    <!-- One-third right -->
    <keybind key="W-S-9">
      <action name="MoveResizeTo">
        <x>66%</x><y>0</y><width>34%</width><height>100%</height>
      </action>
    </keybind>

    <!-- Half right -->
    <keybind key="W-S-0">
      <action name="MoveResizeTo">
        <x>50%</x><y>0</y><width>50%</width><height>100%</height>
      </action>
    </keybind>

    <!-- Half-tiling -->
    <keybind key="W-Left">
      <action name="SnapToEdge" direction="left"/>
    </keybind>
    <keybind key="W-Right">
      <action name="SnapToEdge" direction="right"/>
    </keybind>
    <keybind key="W-Up">
      <action name="SnapToEdge" direction="up"/>
    </keybind>
    <keybind key="W-Down">
      <action name="SnapToEdge" direction="down"/>
    </keybind>

    <!-- Quarter-tiling (arrow combos, no numpad) -->
    <keybind key="W-Alt-Left">
      <action name="MoveResizeTo">
        <x>0</x>
        <y>0</y>
        <width>50%</width>
        <height>50%</height>
      </action>
    </keybind>
    <keybind key="W-Alt-Right">
      <action name="MoveResizeTo">
        <x>50%</x>
        <y>0</y>
        <width>50%</width>
        <height>50%</height>
      </action>
    </keybind>
    <keybind key="W-Alt-Down">
      <action name="MoveResizeTo">
        <x>0</x>
        <y>50%</y>
        <width>50%</width>
        <height>50%</height>
      </action>
    </keybind>
    <keybind key="W-Alt-S-Down">
      <action name="MoveResizeTo">
        <x>50%</x>
        <y>50%</y>
        <width>50%</width>
        <height>50%</height>
      </action>
    </keybind>

    <!-- Move to edges without resize -->
    <keybind key="W-S-Left">
      <action name="MoveToEdge">
        <direction>west</direction>
      </action>
    </keybind>
    <keybind key="W-S-Right">
      <action name="MoveToEdge">
        <direction>east</direction>
      </action>
    </keybind>
    <keybind key="W-S-Up">
      <action name="MoveToEdge">
        <direction>north</direction>
      </action>
    </keybind>
    <keybind key="W-S-Down">
      <action name="MoveToEdge">
        <direction>south</direction>
      </action>
    </keybind>

    <!-- Workspaces (4) -->
    <keybind key="W-1">
      <action name="GoToDesktop"><to>1</to></action>
    </keybind>
    <keybind key="W-2">
      <action name="GoToDesktop"><to>2</to></action>
    </keybind>
    <keybind key="W-3">
      <action name="GoToDesktop"><to>3</to></action>
    </keybind>
    <keybind key="W-4">
      <action name="GoToDesktop"><to>4</to></action>
    </keybind>
    <keybind key="W-Page_Up">
      <action name="GoToDesktop"><to>previous</to></action>
    </keybind>
    <keybind key="W-Page_Down">
      <action name="GoToDesktop"><to>next</to></action>
    </keybind>

    <keybind key="W-S-1">
      <action name="SendToDesktop"><to>1</to><follow>yes</follow></action>
    </keybind>
    <keybind key="W-S-2">
      <action name="SendToDesktop"><to>2</to><follow>yes</follow></action>
    </keybind>
    <keybind key="W-S-3">
      <action name="SendToDesktop"><to>3</to><follow>yes</follow></action>
    </keybind>
    <keybind key="W-S-4">
      <action name="SendToDesktop"><to>4</to><follow>yes</follow></action>
    </keybind>

    <!-- Screenshots -->
    <keybind key="Print">
      <action name="Execute">
        <command>grim "$HOME/Pictures/screenshot-$(date +%F_%H-%M-%S).png"</command>
      </action>
    </keybind>

    <!-- Quick reconfigure -->
    <keybind key="W-Escape">
      <action name="Reconfigure"/>
      <action name="Execute"><command>notify-send "Reconfigured labwc."</command></action>
    </keybind>

    <keybind key="W-s">
      <action name="Execute"><command>notify-send "W-s fired"</command></action>
    </keybind>

    <keybind key="W-S-s">
      <action name="Execute"><command>notify-send "W-S-s fired"</command></action>
    </keybind>

    <keybind key="W-Space">
      <action name="Execute"><command>notify-send "W-Space fired"</command></action>
      <action name="Execute"><command>wofi --show drun</command></action>
    </keybind>

  </keyboard>

  <!-- ===== DESKTOPS ===== -->
  <desktops>
    <number>4</number>
    <firstdesk>1</firstdesk>
    <names>
      <name>work</name>
      <name>code</name>
      <name>web</name>
      <name>media</name>
    </names>
    <popupTime>900</popupTime>
  </desktops>

  <!-- ===== WINDOW RULES ===== -->
  <applications>
    <!-- Center dialogs -->
    <application type="dialog">
      <center>yes</center>
      <decor>yes</decor>
    </application>

    <!-- Terminals start maximized on the small display -->
    <application class="(?i)kitty|alacritty|gnome-terminal">
      <maximized>true</maximized>
    </application>
  </applications>

  <!-- ===== WACOM PEN: rocker buttons ===== -->
  <tablet mouseEmulation="no">
    <!-- Tip stays left-click; map rocker: upper=Right, lower=Middle -->
    <map button="Stylus" to="Right"/>
    <map button="Stylus2" to="Middle"/>
  </tablet>

</openbox_config>

